<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mental Health Analysis Tool</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('serve_styles', filename='main.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
</head>
<body>
    <!-- Disclaimer Screen -->
    <div id="screen1" {% if session.get('passed_disclaimer', False) %}class="hidden"{% endif %}>
        <h2>Depression Detection Analysis</h2>
        <p>
            This tool helps identify potential emotional patterns in social media text that may indicate mental health concerns.
            It's designed to raise awareness and provide insights based on language patterns and emotional expression.
        </p>
        <p>
            <strong>Important Note:</strong> This system is not a medical diagnostic tool and does not replace professional 
            mental health services. It's an educational resource to help understand how language can reflect emotional states.
        </p>
        <p>
            If you or someone you know is experiencing symptoms of depression or other mental health concerns,
            please consult with a qualified healthcare professional.
        </p>
        <form action="{{ url_for('acknowledge_disclaimer') }}" method="POST">
            <button type="submit" class="button">I Understand</button>
        </form>
    </div>
    
    <!-- Detection Screen -->
    <div id="screen2" class="{% if not session.get('passed_disclaimer', False) %}hidden{% endif %} main-screen">
        <h2>Depression Detection Analysis</h2>
        <p>Analyze Twitter posts to identify emotional patterns and potential signs of mental health concerns.</p>
        
        <form id="detectionForm">
            <div class="search-box">
                <span class="icon">@</span>
                <input type="text" name="username" id="username" placeholder="Enter Twitter username..." required>
            </div>
            <button type="button" id="analyzeTweetsBtn" class="button">Analyze Profile</button>
        </form>
        
        <div id="loadingContainer" class="loading-container hidden">
            <div class="loading-bar-container">
                <div class="loading-bar"></div>
            </div>
            <p class="loading-text">Processing data and analyzing emotional patterns...</p>
        </div>
        
        <div id="resultContainer" class="result-container hidden">
            <h3>Analysis Results</h3>
            <p id="resultText"></p>
            
            <!-- Chart container -->
            <div id="chartContainer" class="chart-container hidden">
                <h3 class="chart-title">Emotional Expression Profile</h3>
                <p class="chart-subtitle">Distribution of emotions detected in recent posts</p>
                <div class="chart-wrapper">
                    <canvas id="emotionChart"></canvas>
                </div>
                
                <div class="legend-container">
                    <!-- Legend items will be dynamically generated -->
                </div>
            </div>
        </div>
        
        <!-- Tweet examples modal -->
        <div id="tweetModal" class="modal hidden">
            <div class="modal-content">
                <span class="close-button">&times;</span>
                <h3 id="modalTitle">Examples</h3>
                <div id="modalTweets" class="modal-tweets-container">
                    <!-- Tweet examples will be inserted here -->
                </div>
            </div>
        </div>
        
        <div class="organizations">
            <h3>Mental Health Organizations</h3>
            <p><a href="tel:+63289214958">Philippine Mental Health Association<br>(02) 8921 4958</a></p>
            <p><a href="tel:+639178998727">National Center for Mental Health Crisis Hotline<br>tel. 1553 / cel. 0917-899-8727</a></p>
        </div>
        
        <!-- End button for main page -->
        <button id="mainEndButton" class="button end-button" onclick="location.href='/'">End Session</button>
    </div>
    
    <script src="{{ url_for('serve_scripts', filename='scripts.js') }}"></script>
</body>
</html>